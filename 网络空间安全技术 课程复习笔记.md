# 网络空间安全技术 课程复习笔记

#### 课程主要内容：

- 网络空间安全概述
- 信息与网络空间安全保障
- 网络空间安全风险管理
- 网络空间安全技术体系结构
- 网络空间安全技术
- 防火墙与入侵检测技术
- 其他网络空间安全技术与设备
- 虚拟专用网技术
- - 数据安全

- - 呢欧容安全技术基础

- 网络空间安全前沿技术


------

## ch1 网络空间安全概述

为什么 存在信息安全问题？

内因：系统逐渐复杂、人也是复杂的、

外因：对手的威胁(国家安全、共同威胁、局部威胁	eg：情报机构、恐怖分子、间谍、黑客……)、自然的破坏

信息系统安全：以前靠密码，或者说加密方式的保密->后来def：确保信息在网络信息系统中的存储、处理和传输过程中免受非授权的访问，防止授权用户的拒绝服务

技术import but only 服务于组指业务使命才有意义

信息安全基本目标(CIA)：

- 机密性：无非授权访问
- 完整性：没有被篡改和破坏
- 可用性：方便快捷

如何保障信息安全：

- 技术层面有控制措施
- 有效管理约束人员
- 在贯穿系统生命周期
- 高素质人才队伍

国内外安全态势：勒索病毒、信息泄露、DDos

安全趋势：隐蔽性、趋利性、新技术的安全措施不完整

没有网络安全就没有国家安全...

信息安全需要：居安思危、冰山理论、墨菲定律、名医启示(治病还是预防？)、木桶原理

other：物理安全、安全问题(长期存在、无处不在、影响深远)、明确责任、没有绝对安全、安全是一种平衡：在安全成本和提供的安全水平之间、安全意识

信息安全->信息系统、信息本身、信息利用->机密性、可鉴别性、可控性、可用性->物理安全、运行安全、数据安全、内容安全

定义网络空间安全(424)：电磁设备、信息通信系统、运行数据、系统应用

​					  防止、保护数据免受攻击，防止、应对政治、经济、文化、社会、国防安全

​					  机密性、可鉴别性、可控性、可用性

四个层次模型：设备层、系统层、数据层、应用层

网络空间是人类通过"网络角色"，依托"信息通信技术系统"来进行"广义信号"交互"操作"的人造活动空间。

四要素：载体、对象、主题、形式

四大基础构建模块：信息安全、应用安全、网络安全、因特网安全

关键信息基础设施保护：CIIP

网络空间安全是相对论、实践论、进化论、认识论、方法论、矛盾论

## ch2 网络空间安全风险及风险管理

def：资产：对组指有价值的东西(多种类型)

威胁：漏洞、故障、后门、病毒、社工、地震、失火……

脆弱性：风险的内因，本身对资产无威胁(代码缺陷、安全意识不足等)

控制措施：防范威胁、降低风险

可能性：利用脆弱性造成后果的可能性

影响：利用脆弱性造成后果的程度大小

风险：**威胁源**--采取-->**威胁方式**--利用-->**脆弱性**--造成-->风险--破坏-->**资产**--造成-->不良**影响**--受控制-->控制措施--直接影响-->威胁源(粗体是五个要素)

残余风险

风险评估：三个方面：定性分析、定量评估	模糊综合评价法

风险处置方法：

- 降低风险：减少威胁源、降低威胁能力、减少脆弱性、防护资产、降低负面影响
- 转移风险：(低概率、影响大的时候)保险、外包
- 规避风险：(损失难以接受、难以控制措施降低风险)
- 接收风险

风险分析：

![image-20201228155256651](C:\Users\49353\AppData\Roaming\Typora\typora-user-images\image-20201228155256651.png)

国产化替代：替代被垄断的国外产品

## ch3 信息与网络空间安全保障

IA/CS：Defense/Offense/Exploaitation运维/威慑/情报

PDR(Protect/Detection检测/Response响应)-->>PDRR(+Restore恢复)

-->>PPDR(+policy)

IATF深度防御保障模型：Defense-in-Depth深度防御：人、技术、操作

关注：本地计算环境、区域边界、网络和基础设施、支撑性基础设施

------

## ch4 网络空间安全技术体系与技术

安全机制：用来保障或者保护信息系统安全的一种或一类技术的总称：

- 加密：消息鉴别：消息的密文、Hash、MAC
- 数字签名机制：不可伪造、抗抵赖、完整-->>RSA数字签名
- 访问控制机制：合法主题访问合法客体/防止未授权访问/最小特权原则
- 数据完整性机制：防止非法修改插入替换删除或可被检测
- 鉴别交换机制
- 通信特务流填充机制
- 路由选择控制机制
- 公证机制

安全服务：就是加强数据处理系统和信息传输的安全性的一类服务，其目的在于利用一种或多种安全机制保障信息系统安全或信息系统安全可靠运行

------

## ch5 鉴别机制与技术

确认实体是它声明的/one of the most import security service/对抗假冒攻击

联动：访问控制/数据完整性/审计机制

身份鉴别协议：依据：安全水平/系统通过率/用户可接受性/成本

被动攻击/主动攻击

基于质询-应答的身份鉴别技术：每次传输的鉴别消息不同，但有额外的通信花销/便于重放/不能与传统的简单口令协议结合使用

- 安全性取决于散列函数的安全性/(单向鉴别)存在验证者假冒和重放攻击-->通过双向鉴别或时间戳解决

质询-应答方式不适应非连接性的应用，still 额外开销

------

## ch6 访问控制机制与技术

访问控制：针对越权使用资源的防御措施

访问控制的目标：防止对任何资源进行非授权访问

- 非授权访问：包括未授权的使用、泄露、修改、销毁信息及颁发指令等。

访问控制的作用：保证机密性、完整性、可用性

主体：发起者，用户、进程、程序等/客体：被动实体，被操作的对象，文件、储存介质、程序、进程/访问：对资源的读、写、修改、删除

以上描述为一个三元组(S，A，O)

访问控制过程：鉴别->授权

实现机制和方法：

- 机制：基于访问控制属性：访问控制表/矩阵//基于用户和资源分级：多级控制访问
- 方法：访问控制表ACL/访问能力表/访问控制矩阵(=ACL*CL)/授权关系表/访问控制安全标签

AAA：授权、审计、身份鉴别

![image-20201229161255343](C:\Users\49353\AppData\Roaming\Typora\typora-user-images\image-20201229161255343.png)

MAC：根据主客体的级别标记来决定访问模式：上读/下写，下读/上写

下读：用户级别大与文件级别的读操作

上写：用户级别低于文件级别的写操作

上读：用户级别低于文件级别的读操作

下写：用户级别高于文件级别的写操作

根据写来代表信息流动方向：下写->完整性///上写->机密性

强制访问控制--下读/上写：

- 下读/上写：下读：主题高于客体时可读，低级别不可读高敏感信息
- 上写：主体低于客体时可写。不允许高敏感信息写入低敏感区域
- 信息从低级别流向高级别->保证机密性

强制访问控制--上读/下写：

- 上读：低级别用户可读取高敏感信息
- 下写：高敏感信息可写入低敏感区域
- 实现数据完整性

常见模型：BLP、Biba、Clark-Wilson、Chinese Wall

Bell-Lapadula(BLP)：下读/上写(不上读、不下写)机密性=>防火墙

Biba：上读/下写(不下读、不上写)完整性=>web服务器 

Windows自主访问控制：

- 过程：
  - 组成部件：
    - 安全标识、访问令牌、主体、对象、安全描述符

------

## ch7 防火墙技术及其发展

firewall：在网路间提供安全连接的设备//用于实现和执行网络之间通信的安全策略

分类：硬件：内、外部网络之间//软件||技术发展可分为：包过滤、应用代理和状态检测

↑ 应用层  Data  应用代理：在应用层，通过不同的代理程序，实现对  | 						应用层的数据的检测和分析

| 传输层  Segment 包过滤：工作在网络层，仅根据包头中IP地址、   |                 端口、协议类型等确定是否允许数据包通过

| IP 层   Packet  状态检测：工作在2-4层，处理整个连接、通过规   |                 则表和状态连接表判断

| 网络接口层  Frame  完全内容检测：2-7层各种、混合检测

![image-20201229171535738](C:\Users\49353\AppData\Roaming\Typora\typora-user-images\image-20201229171535738.png)

NAT：隐藏内网结构、内网用私有地址

MAP：公开服务器使用私有地址、隐藏内网结构

IDS梦幻联动：防御攻击行为

IP与MAC绑定

接入方式：路由接入、透明接入、混合接入

衡量吞吐量的指标：吞吐量//时延：入口处输入帧最后1 bit到达出口处输出帧的第1 bit输出用的时间间隔//丢包率//背靠背：空闲状态开始，到达传输介质最小合法间隔极限的传输速率发送相当数量的固定长度的帧，出现第一个帧丢失时，发送的帧数//并发连接数

WAF	功能：对Web的入侵方式加强保护(DDos、SQL Injecton、XML、XSS)

​	   部署：应在Web服务器前，串行接入

​	   技术原理：代理服务：是一种安全网关，基于会话的双向代理，中断用户与服务器直接连接，使用各种加密协议，是Web的Cache应用中最常见的技术，防止了入侵者直接进入，对DDos攻击可以抑制，对非预料的行动也能抑制。

------

## **`ch8 入侵检测`**

入侵：是在未授权情况下，试图存取或者处理信息，or破坏系统网络正常运行的行为

入侵检测：对入侵行为的发觉，通过对网络或者系统的关键信息的采集和分析，发现被攻击行为或违反安全迹象的行为

入侵检测系统：实现入侵检测功能合集的硬件加软件集合

功能：auto检测入侵、检测流量和host行为、分析入侵行为(特征、异常)、按预定规则响应(阻止指定行为)

常用模型：

通用入侵模型(Denning)

层次化入侵检测(IDM)

管理式入侵检测模型

Denning：

![image-20201231144136320](C:\Users\49353\AppData\Roaming\Typora\typora-user-images\image-20201231144136320.png)

IDM：

![image-20201231150044863](C:\Users\49353\AppData\Roaming\Typora\typora-user-images\image-20201231150044863.png)

CIDF架构：

一个通用模型|将需要分析的数据作为事件|可以是数据包、日志或其他信息|通过通用入侵说明语言(CISL)把入侵检测系统从逻辑上分为面向任务的组件 

------

入侵检测系统的通用模型

![image-20201231155439636](C:\Users\49353\AppData\Roaming\Typora\typora-user-images\image-20201231155439636.png)

------

入侵检测通用模型

![image-20201231155902799](C:\Users\49353\AppData\Roaming\Typora\typora-user-images\image-20201231155902799.png)

------

IDS分析技术分类：

- 异常检测：通过采集和统计异常行为
- 特征检测：通过对已知信息分析，来发现入侵行为

![image-20201231160329407](C:\Users\49353\AppData\Roaming\Typora\typora-user-images\image-20201231160329407.png)

异常检测：

- 基于行为的检测
- 首先建立正常使用模式——知识库
- 标识非正常行为
- 假设all 入侵行为都是异常
- 基于系统和用户的异常
- 难度大，符合安全关键
  - 难划分正常异常|正常的知识库不好建立

异常检测优点：检测未知攻击、自适应、自学习、不需要先验

key：正常行为选择、统计算法

使用的方法：基于神经网络|统计方法|专家系统|模型推理

数据来源：审计日志、流量|数据收集

异常检测常用技术：通过主题正常行为模型来发现异常行为

​	基本假设：程序or用户，行为在时间和空间域中表现紧密相关

量化分析技术：用数字来表示主体的行为特征

- 目标完整性检测
  - 系统定时计算校验和，与参考值对比，如超过阈值则异常
  - Tripwire工具——最著名

- 门限检测
  - 记录一段时间的行为特征，变化情况，与预先范围比较，有明显偏差则为异常
  - eg：一段时间用户合法登陆次数

特征检测：

误用检测|针对一致的攻击行为和间接的违背系统安全策略行为的检测，攻击和系统漏洞库是检测的基础|建立入侵模型|判断行为是否符合攻击模式|假设可以识别和表示所有可能特征|基于系统和用户|目前已经应用

优点：准确率高|算法简单

key ques：有所有攻击特征，建立特征库|更新|无法判断最新入侵

数据来源：审计日志、流量、数据收集

使用的检测方法：

- 基于专家系统：基于安全专家对可疑行为的分析形程推理规则
- 基于简单规则的模式匹配技术
- 基于攻击签名分析：翻译成可在审计系统中发现的信息，检测时不需要语义级的攻击描述
- 基于模式匹配的检测：将审计轨迹抽象为事件流，使用CPN描述攻击模式、入侵检测器作用模式匹配器
- 基于状态转换分析：考虑攻击行为每步的系统状态

主机入侵检测系统

软件代理的形式|软件向管理/策略服务器发送日志和警告信息

分类：网络连接检测|主机文件检测

网络连接检测：

- 对进入主机的数据流检测，可以有效地检测出是否存在攻击探测行为
- 攻击探测几乎是所有攻击行为的前奏
  - 管理员设置好访问控制表，包括易受到攻击探测的网络服务，并且设置访问权限，如果熊发现有对未开放的服务端口进行连接，说明有人在找系统漏洞，就可以被记录下来

未授权的连接也被检测

主机文件检测：

入侵行为通常都会留下相关文件痕迹，文件检测就能够帮助admin发现，采取补救措施

主要检测对象：

- 系统日志：查看日志中是否有不正常的反复登陆失败记录、未授权用户越权访问重要文件、非正常登陆行为等
- 系统文件：目录或者文件被非正常的创建、修改或删除
- 进程记录：进程分解、导致程序终止

主机入侵检测系统优点：

- 在长期监控谁访问什么
- 可以将问题映射到一个具体用户ID
- 系统可以跟踪滥用行为的变化
- 适用于加密环境
- 可以运行在交换环境中
- 检测分布在多台主机上的负载，只将有关数据上报中央控制台

缺点：

- 无法检测网络活动
- 审计机制增加了系统负载
- 审计记录会占用空间
- 操作系统的漏洞可能破坏代理软件的有效性
- 不同类型的操作系统需要不同的代理软件
- 升级
- 部署和维护成本

网络入侵检测系统

混杂模式接入网络|感应器可部署在网络关键位置|日志/告警信息发送至位于企业防火墙的内部服务器

常作为独立个题被放在被保护的网络上|使用原始的网络分组数据包作为进行攻击分析的数据源

一般利用一个网络适配器来实时监视和分析所有通过网络进行传输的通信

检测到攻击，入侵检测系统应答模块通过通知、报警以及中断连接等方式对攻击作出反应

检测引擎设计技术

- 模式匹配技术

  - 从网络数据包包头开始和攻击特征比较

    - 相同，检测到一个可能攻击

    - 不同，从网络数据包下一个位置重新开始比较

  - 直至检测到攻击或者全部匹配完毕，一个特征结束

  - 对每个特征重复前两步

  - 直到对给定数据包匹配完毕

网络入侵检测系统优点：

- 不需要重新配置或者重定向日志机就可快速获取信息
- 部署不影响现有网络架构或数据源
- 实时监控与检测网络攻击或误用
- 与操作系统无关
- 不增加系统开销

缺点：

- 无法分析加密数据
- 流量可以分析发生了什么，不知道结果
- 全交换网络需要配置交换机端口镜像
- 带宽要求高

网络节点入侵检测系统

安装在网络节点的主机中||结合了NIDS和HIDS技术||适合于高速交换和加密环境

入侵的响应方式：

- IDS控制台显示告警信息
- 通过电子邮件向管理员发送信息
- 通过预先的规则阻断连接：IDS自身阻断||防火墙联动
- 采取事件归并，保证响应机制不被入侵者利用，导致拒绝服务

IDS两个指标：漏报率：攻击事件没有被IDS检测到&&误报率

基于网络的IDS系统实现：

- 收集网络流量数据
  - 利用sniff技术
  - 把IDS配置在合理的流量集中点上，eg：与防火墙或网关配置在一个子网中

- 利用某些识别技术
  - 基于模式匹配的专家系统
  - 基于异常行为分析的检测手段

入侵检测系统的典型部署及问题

典型部署：旁路的方式接入网络，部署在关键位置

- 检测器放在防火墙的DMZ区域
  - 查看保护区域主机被攻击状态
  - 看防火墙策略是否合理
  - 看DMZ区域被黑客攻击的重点
- 检测器放置路由器和边界防火墙之间
  - 审计所有来自Internet上面对保护网络的攻击数目和类型
- 检测器放在主要的网络中枢
  - 监控大量的网络数据，提高检测黑客攻击的可能性
  - 通过授权用户的权力周界来发现未授权用户的行为
- 检测器放在安全级别高的子网
  - 对非常重要的系统和资源的入侵检测

------

## ch9 其他网络安全技术及设备

知识点：

- 安全隔离与信息交换系统(网闸)
- 入侵防御系统(IPS)
- 安全管理平台(SOC)
- 同意威胁管理系统(UTM)
- 网络准入控制(NAC)

IPS：是一种集成入侵检测和防御一体的产品，简单说IPS=IDS+防火墙

主要功能：

- 识别对网络和主机的恶意攻击，并实时进行阻断
- 向管理控制台发送日志信息
- 集成病毒过滤、带宽管理和URL过滤等功能

IDS与IPS技术同源

![image-20210101154257243](C:\Users\49353\AppData\Roaming\Typora\typora-user-images\image-20210101154257243.png)

网闸：两个不同的安全域之间，通过协议转换的手段，以信息摆渡的方式实现数据交换，只有被系统要求传输的信息才能通过，信息流一般为通用应用服务

信息摆渡的过程中，未发生物理连接

在两个物理隔离的网络之间进行安全的数据交换

国家保密局限定的安全隔离网闸使用环境：

- 不同的涉密网络
- 某涉密网络的不同安全域
- 某与Internet物理隔离的内网与秘密级涉密网络
- 未与涉密网络连接的网络与Internet

UTM统一威胁管理系统

UTM集多种功能于一身：

- 传统的防火墙
- IPS=IDS+防火墙
- 防病毒功能
- 端到端的IPSec VPN功能
- 动态路由功能
- 内容过滤功能

SOC安全管理平台

来源于NOC网络运行中心，wiki：是组指中一个集中单元，在整个素质和技术的高度处理安全问题

SOC七步处理：



网络准入控制：NAC

include 身份鉴别||设备安全||网络安全

使用网络准入安全策略，保证进入网络的设备符合策略

功能需求：

身份鉴别、安全认真、动态授权

主要功能：认证与授权||扫描与评估||隔离与实施||更新与修复

![image-20210101161916345](C:\Users\49353\AppData\Roaming\Typora\typora-user-images\image-20210101161916345.png)

------

## ch10 虚拟专用网技术

VPN:基本功能：加密数据||信息认证和身份认证，保证信息的完整性、合法性、并且鉴别用户身份||提供访问控制，不同用户不同权限

分类：按名隧道协议种类||应用范围(VPDN、Intranet VPN)

建立方式：

![image-20210102171136964](C:\Users\49353\AppData\Roaming\Typora\typora-user-images\image-20210102171136964.png)

![image-20210102172834497](C:\Users\49353\AppData\Roaming\Typora\typora-user-images\image-20210102172834497.png)

![image-20210102172848644](C:\Users\49353\AppData\Roaming\Typora\typora-user-images\image-20210102172848644.png)

![image-20210102172958576](C:\Users\49353\AppData\Roaming\Typora\typora-user-images\image-20210102172958576.png)

SSL协议：secure Socket Layer

用于web浏览器和服务器间的身份认证和加密数据传输

SSL 协议的主要服务：

- 认证用户和服务器，保障数据发送到正确的客户机和服务器
- 加密数据以防止数据中途被窃取
- 维护数据完整性不在传输过程中被改变

SSL协议框架：

![image-20210102173929889](C:\Users\49353\AppData\Roaming\Typora\typora-user-images\image-20210102173929889.png)

SSL记录协议：为SSL连接提供了两种服务：机密性、消息完整性

记录协议发出传输请求消息，把数据分段成可操作的数据块，可以选择压缩、加入MAC、加密、加入文件头

SSL握手协议行为过程：

- 建立安全能力(协议版本、会话ID、密码组、压缩方法、初始随机数)
- 服务器可以发证书、密钥交换和请求证书
- 客户机可以发送证书、交换密钥、证书验证
- 更改密码组并完成握手协议

TLS

​	Transport Layer Security传输层安全

SSL实例——HTTPS

HTTPS的安全基础是SSL

HTTPS广泛用于Internet上的安全B/S应用eg：网上交易

HTTPS主要作用：建立一个安全通道，保证数据安全：URL、文档内容、浏览器格式的内容、Cookies、HTTP报头内容

CA可以查看

中间人攻击

缺点：不符合国内安全要求||安全性不够，我国的SSL产品只有512bit公钥 40bit对称密钥的加密

------

## ch11 云计算与安全

应用的分类：(根据服务类型)IaaS(基础设施)/PaaS(应用平台)/SaaS(应用软件)

安全性和可靠性

大规模降低计算成本

安全扩展要求原则性要求：

- 云计算平台不承载高于其安全保护等级的业务应用系统
- 云服务商堆云服务器客户系统和数据的操作可被云服务客户审计
- 只有云服务客户授权，云服务商或第三方才具有云服务客户数据的管理权限

第三级安全要求：

通信：允许客户接入第三方安全产品或选择第三方安全服务

安全区域边界：不同等级的网络安全区域设置访问控制规则

访问控制、镜像和快照保护、数据完整性和保密性、数据备份恢复和剩余信息保护

储存于中国境内

保证虚拟机所使用的内存和存储空间回收时得到完全清除

云服务客户删除业务应用数据时，云计算平台应将云存储中所有副本删除

安全建设管理：管理范围、职责划分、访问授权、隐私保护、行为准则、违约责任

安全体系建设——分区是安全基础

分层式安全部署前提

虚拟化新问题：

1. 端到端安全设备虚拟化
2. 设备高性能结合虚拟化
3. 虚拟化系统安全防护
4. VM之间的流量安全